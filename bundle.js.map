{"version":3,"sources":["webpack/bootstrap 71a49b7e7aff9a20e371","./js/kungfuchess.js","./js/game.js","./js/display.js","./js/constants.js","./js/util.js","./js/board.js","./js/pieces/pieces.js","./js/pieces/pawn.js","./js/pieces/piece.js","./js/pieces/step.js","./js/pieces/bishop.js","./js/pieces/slide.js","./js/pieces/knight.js","./js/pieces/rook.js","./js/pieces/queen.js","./js/pieces/king.js","./js/player.js","./js/randomAI.js","./js/greedyAI.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA,EAAC;;;;;;;AC9CD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACrCA;AACA;;AAEA,eAAc;;AAEd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,SAAS;AAC5B,sBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAU,mCAAmC;AAC7C;AACA,6BAA4B;AAC5B;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,eAAc,mCAAmC;AACjD;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA2B,iCAAiC;AAC5D;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;;AAEA;AACA;;;AAGA;;;;;;;AC3BA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAiB,OAAO;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,6BAA4B,oCAAoC;AAChE;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,sBAAqB,wCAAwC;AAC7D,sBAAqB,wCAAwC;AAC7D,sBAAqB,wCAAwC;AAC7D,sBAAqB,wCAAwC;AAC7D,sBAAqB,wCAAwC;AAC7D,sBAAqB,wCAAwC;AAC7D,sBAAqB,wCAAwC;AAC7D,sBAAqB,wCAAwC;AAC7D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;AAC3D,qBAAoB,wCAAwC;AAC5D,qBAAoB,wCAAwC;AAC5D,oBAAmB,wCAAwC;AAC3D,oBAAmB,wCAAwC;;AAE3D;AACA,uBAAsB,wCAAwC;AAC9D,uBAAsB,wCAAwC;AAC9D,uBAAsB,wCAAwC;AAC9D;;;AAGA;;;;;;;AC/LA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACdA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;AClDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;;;;;;;AC9EA;AACA;AACA;AACA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA,oBAAmB,iBAAiB;AACpC,sBAAqB,OAAO;AAC5B;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;AC9CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACvBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACtBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;;AAEA;;;;;;;AClFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;ACbA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AClCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 71a49b7e7aff9a20e371\n **/","var Game = require('./game');\n\n$(function () {\n  var $root = $('#game');\n  var game = new Game($root);\n\n  var $controls = $('#game-controls');\n  $('<input id=\"start\" type=\"button\" value=\"start\" />').click(function(event){\n    var $overlay = $('<div>').addClass('overlay').prependTo($('html'));\n    var $modal = $('<div>').addClass('modal').appendTo($overlay);\n    var $countdown = $('<div>')\n      .addClass('countdown')\n      .text('3')\n      .appendTo($modal);\n\n    setTimeout(function(){\n      $countdown.text('2');\n      setTimeout(function() {\n        $countdown.text('1');\n        setTimeout(function() {\n          $overlay.empty();\n          $overlay.remove();\n        }, 1000);\n      }, 1000);\n    }, 1000);\n\n    setTimeout(function(){\n      game.play();\n      $('#reset').prop('disabled', false);\n      $('#start').prop('disabled', true);\n    }, 3000);\n  }).appendTo($controls);\n  $('<input id=\"reset\" type=\"button\" value=\"reset\" disabled/>').click(function(){\n    game.destroy();\n    game = new Game($root);\n    $('#start').prop('disabled', false);\n    $('#reset').prop('disabled', true);\n  }).appendTo($controls);\n  $('<input id=\"info\" type=\"button\" value=\"info\" />').click(function(){\n    window.open('https://en.wikipedia.org/wiki/Kung-Fu_Chess');\n  }).appendTo($controls);\n\n  // $('<a target=_\"blank\" href=\"https://en.wikipedia.org/wiki/Kung-Fu_Chess\"')\n  //   .text(\"About Kungfu Chess\")\n  //   .appendTo($controls);\n\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/kungfuchess.js\n ** module id = 0\n ** module chunks = 0\n **/","var Display = require('./display');\nvar Board = require('./board');\nvar Player = require('./player');\nvar randomAI = require('./randomAI');\nvar greedyAI = require('./greedyAI');\n\nvar Game = function($root) {\n  this.board = new Board();\n  this.board.populate();\n  this.display = new Display($root, this.board);\n  this.running = false;\n\n  this.players = {\n    white: new Player(this.board),\n    black: new greedyAI(this.board, this.display)\n  };\n\n  this.renderBoard();\n};\n\nGame.prototype.play = function () {\n  this.display.setup();\n  this.players.black.run();\n  this.running = true;\n};\n\nGame.prototype.renderBoard = function () {\n  this.display.setGrid();\n};\n\nGame.prototype.destroy = function () {\n  this.running = false;\n  this.players.black.kill();\n  this.board.destroy();\n  this.display.destroy();\n};\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/game.js\n ** module id = 1\n ** module chunks = 0\n **/","var Constants = require('./constants');\nvar Util = require('./util');\n\nvar _selected; //// move to player\n\nvar Display = function($root, board) {\n  this.$root = $root;\n  this.board = board;\n};\n\nDisplay.prototype.setup = function () {\n  this.setGrid();\n  this.renderAllPieces();\n};\n\nDisplay.prototype.setGrid = function () {\n  $('#grid').remove();\n  this.$root.append('<ul>');\n  $(\"ul\").attr('id','grid').addClass('section');\n  var $grid = $('#grid');\n  $(\"<div>\").addClass('pieces').appendTo($grid);\n\n  for (var row = 0; row < 8; row++) {\n    for (var col = 0; col < 8; col++) {\n      var pos = [row, col];\n      var posSum = row + col;\n      var color = (posSum % 2 === 0 ? 'white' : 'black');\n      $('<li>')\n        .addClass('square ' + color)\n        .attr('pos', pos)\n        .click(function(event) { //// move to player\n          removeSelected();\n\n          var newPos = [\n            parseInt($(event.target).attr('pos')[0]),\n            parseInt($(event.target).attr('pos')[2])\n          ];\n\n          if (_selected && _selected.isMoveable && Util.includesPos(newPos, _selected.moves())) {\n            this.board.move(_selected.pos, newPos, this.renderCB);\n          }\n        }.bind(this))\n        .appendTo($grid);\n    }\n  }\n};\n\nDisplay.prototype.renderAllPieces = function () {\n  $('#grid').find('.piece').remove();\n  this.board.pieces().forEach(function(piece) {\n    this.renderPiece(piece);\n  }.bind(this));\n\n};\n\nDisplay.prototype.renderPiece = function(piece) {\n  var top = 60 * piece.pos[0];\n  var left = 60 * piece.pos[1];\n  var content = Constants[piece.type()];\n\n  var $pieces = $('.pieces');\n  var newPiece = $('<div>')\n    .addClass(piece.color + '-piece piece')\n    .text(content)\n    .css({top: top + 'px', left: left + 'px'})\n    .attr('pos', piece.pos)\n    .click(function(event) { //// move to player\n      removeSelected();\n\n      var piecePos = [\n        parseInt($(event.target).attr('pos')[0]),\n        parseInt($(event.target).attr('pos')[2])\n      ];\n\n      var p = this.board.piece(piecePos);\n\n      if (p.color === 'white' ) {\n        newPiece.addClass('selected');\n        _selected = p;\n        _selected.moves().forEach(function(pos) {\n          $('li[pos=\"' + pos[0] + ',' + pos[1] + '\"]').addClass('valid-move');\n        });\n      } else if (p.color === 'black'\n          && Util.includesPos(p.pos, _selected.moves())\n          && _selected.isMoveable) {\n        this.board.move(_selected.pos, p.pos, this.renderCB);\n      }\n    }.bind(this))\n    .appendTo($pieces);\n};\n\nDisplay.prototype.renderCB = function (startPos, endPos, moveCompleted) {\n  removePiece(endPos);\n  if (moveCompleted) {\n    renderPieceMove(startPos, endPos, renderTimer);\n  } else {\n    renderPieceMove(startPos, endPos);\n  }\n};\n\nfunction renderPieceMove(startPos, endPos, completionCB) {\n  var $piece = $('div[pos=\"' + startPos[0] + ',' + startPos[1] + '\"]');\n\n  var top = 60 * endPos[0];\n  var left = 60 * endPos[1];\n\n  $piece.css({top: top + 'px', left: left + 'px'});\n  $piece.attr('pos', endPos);\n\n  if (completionCB) {\n    setTimeout(function(){\n      completionCB(endPos);\n    },250);\n  }\n}\n\nfunction removePiece(pos) {\n  var $piece = $('div[pos=\"' + pos[0] + ',' + pos[1] + '\"]');\n  $piece.empty();\n  $piece.remove();\n}\n\nfunction renderTimer (pos) {\n  var $piece = $('div[pos=\"' + pos[0] + ',' + pos[1] + '\"]');\n  $('<div>').addClass('timer').appendTo($piece);\n\n  setTimeout(function(){\n    $piece.children().css({height: '0px', marginTop: '60px'});\n    setTimeout(function() {\n      $piece.children().remove();\n    }, Constants.Timer);\n  },250);\n}\n\nfunction removeSelected() {\n  $('.selected').removeClass('selected');\n  $('.valid-move').removeClass('valid-move');\n}\n\nDisplay.prototype.destroy = function () {\n  this.$root.empty();\n};\n\nmodule.exports = Display;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/display.js\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = {\n  Bishop: \"♝\",\n  King: \"♚\",\n  Knight: \"♞\",\n  Pawn: \"♟\",\n  Queen: \"♛\",\n  Rook: \"♜\",\n  Timer: 4000\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/constants.js\n ** module id = 3\n ** module chunks = 0\n **/","var Util = {};\n\nUtil.inherits = function (subclass, parentClass) {\n  var Surrogate = function () {};\n  Surrogate.prototype = parentClass.prototype;\n  subclass.prototype = new Surrogate();\n  subclass.prototype.constructor = subclass;\n};\n\n\nUtil.posEquals = function (pos1, pos2) {\n  if (!pos1 || !pos2) {\n    return false;\n  }\n  return pos1[0] === pos2[0] && pos1[1] === pos2[1];\n};\n\nUtil.includesPos = function(pos, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (this.posEquals(pos, array[i]))\n      return true;\n  }\n\n  return false;\n};\n\n\nmodule.exports = Util;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/util.js\n ** module id = 4\n ** module chunks = 0\n **/","var Pieces = require('./pieces/pieces.js');\nvar Util = require('./util');\nvar Constants = require('./constants');\n\nvar Board = function () {\n  this.grid = [];\n  this.whitePieces = [];\n  this.blackPieces = [];\n\n  for (var i = 0; i < 8; i++) {\n    this.grid.push([null,null,null,null,null,null,null,null]);\n  }\n};\n\nBoard.prototype.move = function (startPos, endPos, renderCB) {\n  if (this.isGameOver()) {\n    alert('game over');\n    return console.log('game is over, stop playing');\n  }\n\n  if (this.isEmpty(startPos)) {\n    alert('something went wrong');\n    return console.log('tried to move from empty board pos');\n  }\n\n  if (!Util.includesPos(endPos, this.piece(startPos).moves())) {\n    // alert('something went wrong');\n    // console.log('start: ' + startPos +' - end: ' + endPos);\n    // debugger;\n    return console.log('tried to move to invalid pos');\n  }\n\n  var piece = this.piece(startPos);\n\n  if (!piece.isMoveable) {\n    alert(\"cant move yet\");\n    return console.log('tried to move piece before timer, something boke');\n  }\n\n  piece.move(endPos, renderCB);\n};\n\nBoard.prototype.piece = function (pos) {\n  return this.grid[pos[0]][pos[1]];\n};\n\nBoard.prototype.placePiece = function (piece) {\n  var pos = piece.pos;\n  this.grid[pos[0]][pos[1]] = piece;\n};\n\nBoard.prototype.addPiece = function (piece) {\n  if (piece.color === \"white\") {\n    this.whitePieces.push(piece);\n  } else {\n    this.blackPieces.push(piece);\n  }\n  this.placePiece(piece);\n};\n\nBoard.prototype.inBounds = function (pos) {\n  return (\n    pos[0] >= 0 && pos[0] < 8 &&\n    pos[1] >= 0 && pos[1] < 8\n  );\n};\n\nBoard.prototype.hasPiece = function (pos) {\n  return Boolean(this.inBounds(pos) && this.grid[pos[0]][pos[1]]);\n};\n\nBoard.prototype.isEmpty = function (pos) {\n  return !this.hasPiece(pos);\n};\n\nBoard.prototype.pieces = function (color) {\n  if (typeof color === 'undefined') {\n    return this.whitePieces.concat(this.blackPieces);\n  } else if (color === \"white\") {\n    return this.whitePieces;\n  } else if (color === \"black\") {\n    return this.blackPieces;\n  }\n};\n\nBoard.prototype.findKing = function (color) {\n  return this.king(color).pos;\n};\n\nBoard.prototype.king = function (color) {\n  var king;\n  this.pieces(color).forEach(function (piece) {\n    if (piece.type() === \"King\") {\n      king = piece;\n    }\n  });\n  return king;\n};\n\nBoard.prototype.isGameOver = function () {\n  var result = (this.king('white') && this.king('black')) ? false : true;\n  return result;\n};\n\nBoard.prototype.clearPos = function (pos) {\n  if (this.hasPiece(pos)) {\n    var piece = this.piece(pos);\n    piece.setPos(null);\n  }\n\n  this.grid[pos[0]][pos[1]] = null;\n};\n\nBoard.prototype.removePiece = function (pos) {\n  if (this.hasPiece(pos)) {\n    var piece = this.piece(pos);\n    var idx;\n    if (piece.color === \"white\") {\n      idx = this.whitePieces.indexOf(piece);\n      this.whitePieces.splice(idx,1);\n    } else {\n      idx = this.blackPieces.indexOf(piece);\n      this.blackPieces.splice(idx,1);\n    }\n    this.grid[piece.pos[0]][piece.pos[1]] = null;\n    piece.setPos(null);\n  }\n};\n\nBoard.prototype.promotePawn = function (piece, renderCB) {\n  var color = piece.color;\n  var pos = piece.pos;\n\n  this.removePiece(piece.pos);\n\n  var q = new Pieces.Queen({color: color, board: this, pos: pos});\n  q.isMoveable = false;\n\n  var $piece = $('div[pos=\"' + pos[0] + ',' + pos[1] + '\"]');\n  $piece.text(Constants.Queen);\n\n  q.setTimer();\n};\n\nBoard.prototype.destroy = function () {\n  this.grid = [];\n  this.whitePieces = [];\n  this.blackPieces = [];\n};\n\nBoard.prototype.populate = function () {\n  new Pieces.Pawn({color: \"black\", board: this, pos: [1,0]});\n  new Pieces.Pawn({color: \"black\", board: this, pos: [1,1]});\n  new Pieces.Pawn({color: \"black\", board: this, pos: [1,2]});\n  new Pieces.Pawn({color: \"black\", board: this, pos: [1,3]});\n  new Pieces.Pawn({color: \"black\", board: this, pos: [1,4]});\n  new Pieces.Pawn({color: \"black\", board: this, pos: [1,5]});\n  new Pieces.Pawn({color: \"black\", board: this, pos: [1,6]});\n  new Pieces.Pawn({color: \"black\", board: this, pos: [1,7]});\n  new Pieces.Pawn({color: \"white\", board: this, pos: [6,0]});\n  new Pieces.Pawn({color: \"white\", board: this, pos: [6,1]});\n  new Pieces.Pawn({color: \"white\", board: this, pos: [6,2]});\n  new Pieces.Pawn({color: \"white\", board: this, pos: [6,3]});\n  new Pieces.Pawn({color: \"white\", board: this, pos: [6,4]});\n  new Pieces.Pawn({color: \"white\", board: this, pos: [6,5]});\n  new Pieces.Pawn({color: \"white\", board: this, pos: [6,6]});\n  new Pieces.Pawn({color: \"white\", board: this, pos: [6,7]});\n  new Pieces.Bishop({color: \"white\", board: this, pos: [7,2]});\n  new Pieces.Bishop({color: \"white\", board: this, pos: [7,5]});\n  new Pieces.Bishop({color: \"black\", board: this, pos: [0,2]});\n  new Pieces.Bishop({color: \"black\", board: this, pos: [0,5]});\n  new Pieces.Knight({color: \"white\", board: this, pos: [7,1]});\n  new Pieces.Knight({color: \"white\", board: this, pos: [7,6]});\n  new Pieces.Knight({color: \"black\", board: this, pos: [0,1]});\n  new Pieces.Knight({color: \"black\", board: this, pos: [0,6]});\n  new Pieces.Rook({color: \"white\", board: this, pos: [7,0]});\n  new Pieces.Rook({color: \"white\", board: this, pos: [7,7]});\n  new Pieces.Rook({color: \"black\", board: this, pos: [0,7]});\n  new Pieces.Rook({color: \"black\", board: this, pos: [0,0]});\n  new Pieces.Queen({color: \"white\", board: this, pos: [7,3]});\n  new Pieces.Queen({color: \"black\", board: this, pos: [0,3]});\n  new Pieces.King({color: \"black\", board: this, pos: [0,4]});\n  new Pieces.King({color: \"white\", board: this, pos: [7,4]});\n\n  // testing\n  // new Pieces.King({color: \"black\", board: this, pos: [7,4]});\n  // new Pieces.King({color: \"white\", board: this, pos: [0,4]});\n  // new Pieces.Pawn({color: \"black\", board: this, pos: [6,1]});\n};\n\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/board.js\n ** module id = 5\n ** module chunks = 0\n **/","var Pawn = require('./pawn'),\n    Bishop = require('./bishop'),\n    Knight = require('./knight'),\n    Rook = require('./rook'),\n    Queen = require('./queen'),\n    King = require('./king');\n\nmodule.exports = {\n  Pawn: Pawn,\n  Bishop: Bishop,\n  Knight: Knight,\n  Rook: Rook,\n  Queen: Queen,\n  King: King\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/pieces.js\n ** module id = 6\n ** module chunks = 0\n **/","var Util = require('../util');\nvar Piece = require('./piece');\nvar Step = require('./step');\n\nfunction Pawn(attrs){\n  this.color = attrs.color;\n  this.board = attrs.board;\n  this.pos = attrs.pos;\n  this.isMoveable = true;\n\n  var self = this;\n  self.board.addPiece(self);\n\n  this.moves = Step.moves.bind(this);\n}\n\nUtil.inherits(Pawn, Piece);\n\nPawn.prototype.getMoveDirs = function () {\n  var b = this.board;\n  var dirs = [];\n  var isWhite = this.color === \"white\";\n  var startingRank = isWhite ? 6 : 1;\n  var direction = isWhite ? -1 : 1;\n\n  var nextPos = [this.pos[0] + direction, this.pos[1]];\n  if (b.isEmpty(nextPos)) {\n    dirs.push([direction, 0]);\n    if(this.pos[0] === startingRank &&\n      b.isEmpty([this.pos[0] + (2 * direction), this.pos[1]])) {\n        dirs.push([direction * 2, 0]);\n    }\n  }\n\n  var left = [this.pos[0] + direction, this.pos[1] - 1];\n  var right = [this.pos[0] + direction, this.pos[1] + 1];\n\n  if (b.inBounds(left)\n      && b.hasPiece(left)\n      && b.piece(left).color !== this.color)\n    dirs.push([direction, -1]);\n\n  if (b.inBounds(right)\n      && b.hasPiece(right)\n      && b.piece(right).color !== this.color)\n    dirs.push([direction, 1]);\n\n  return dirs;\n};\n\nmodule.exports = Pawn;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/pawn.js\n ** module id = 7\n ** module chunks = 0\n **/","var Util = require('../util');\nvar Constants = require('../constants');\n\nvar Piece = function(attrs){\n  this.color = attrs.color;\n  this.board = attrs.board;\n  this.pos = attrs.pos;\n  this.isMoveable = true;\n};\n\nPiece.prototype.setPos = function (pos) {\n  this.pos = pos;\n};\n\nPiece.prototype.pos = function () {\n  return this.pos;\n};\n\nPiece.prototype.color = function () {\n  return this.color;\n};\n\nPiece.prototype.type = function () {\n  return this.constructor.name;\n};\n\nPiece.prototype.move = function (targetPos, renderCB) {\n  var b = this.board;\n  var dx = targetPos[0] - this.pos[0];\n  var dy = targetPos[1] - this.pos[1];\n  var xDir = dx !== 0 ? dx / Math.abs(dx) : 0;\n  var yDir = dy !== 0 ? dy / Math.abs(dy) : 0;\n  var newPos = [this.pos[0] + xDir, this.pos[1] + yDir];\n\n  if (Util.includesPos(newPos, this.moves())) {\n    this.isMoveable = false;\n    var stopMoving = false;\n    if (Util.posEquals(newPos, targetPos) || (b.hasPiece(newPos) && b.piece(newPos).color !== this.color)) {\n      stopMoving = true;\n    }\n    renderCB(this.pos, newPos, stopMoving);\n\n    this.board.removePiece(newPos);\n    this.board.clearPos(this.pos);\n\n    this.setPos(newPos);\n    this.board.placePiece(this);\n\n    this.moved = true;\n\n    if (this.board.isGameOver()) {\n      console.log('move attempted, game has ended');\n    }\n\n    if (stopMoving) {\n      if (this.type() === 'Pawn' && (this.pos[0] === 7 || this.pos[0] === 0)) {\n        this.board.promotePawn(this, renderCB);\n      } else {\n        this.setTimer();\n      }\n      return;\n    } else {\n      setTimeout(function(){\n        this.move(targetPos, renderCB);\n      }.bind(this), 250);\n    }\n  }\n};\n\nPiece.prototype.setTimer = function () {\n  setTimeout(function() {\n    this.isMoveable = true;\n  }.bind(this), Constants.Timer + 500);\n};\n\nPiece.STRAIGHTS = [[-1, 0], [1, 0], [0, -1], [0, 1]];\nPiece.DIAGONALS = [[-1, -1], [-1, 1], [1, 1], [1, -1]];\n\nmodule.exports = Piece;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/piece.js\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = {\n  moves: function () {\n    var moves = [];\n    var board = this.board;\n    var dirs = this.getMoveDirs();\n    for (var i = 0; i < dirs.length; i++) {\n      var move = [this.pos[0] + dirs[i][0], this.pos[1] + dirs[i][1]];\n      if (!board.inBounds(move)) {\n        continue;\n      } else if (board.hasPiece(move) && board.piece(move).color !== this.color) {\n        moves.push(move);\n      } else if (!board.hasPiece(move)) {\n        moves.push(move);\n      }\n    }\n    return moves;\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/step.js\n ** module id = 9\n ** module chunks = 0\n **/","var Util = require('../util');\nvar Piece = require('./piece');\nvar Slide = require('./slide');\n\nfunction Bishop(attrs){\n  this.color = attrs.color;\n  this.board = attrs.board;\n  this.pos = attrs.pos;\n  this.isMoveable = true;\n\n  var self = this;\n  self.board.addPiece(self);\n\n  this.moves = Slide.moves.bind(this);\n}\n\nUtil.inherits(Bishop, Piece);\n\nBishop.prototype.getMoveDirs = function () {\n  return Piece.DIAGONALS;\n};\n\nmodule.exports = Bishop;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/bishop.js\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = {\n  moves: function () {\n    var moves = [];\n    var board = this.board;\n    var dirs = this.getMoveDirs();\n    for (var i = 0; i < dirs.length; i++) {\n      for (var d = 1; d < 8; d++) {\n        var pos = [this.pos[0] + (dirs[i][0] * d), this.pos[1] + (dirs[i][1] * d)];\n        if (!this.board.inBounds(pos)) {\n          break;\n        } else if (this.board.inBounds(pos) && !this.board.hasPiece(pos)) {\n          moves.push(pos);\n        } else if (this.board.hasPiece(pos) && this.board.piece(pos).color !== this.color) {\n          moves.push(pos);\n          break;\n        } else {\n          break;\n        }\n      }\n    }\n    return moves;\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/slide.js\n ** module id = 11\n ** module chunks = 0\n **/","var Util = require('../util');\nvar Piece = require('./piece');\nvar Step = require('./step');\nvar Constants = require('../constants');\n\nfunction Knight(attrs){\n  this.color = attrs.color;\n  this.board = attrs.board;\n  this.pos = attrs.pos;\n  this.isMoveable = true;\n\n  var self = this;\n  self.board.addPiece(self);\n\n  this.moves = Step.moves.bind(this);\n}\n\nUtil.inherits(Knight, Piece);\n\nKnight.prototype.getMoveDirs= function () {\n  return [[2,1], [-2,1], [-2,-1], [2,-1], [1,2], [1,-2], [-1,2], [-1,-2]];\n};\n\nKnight.prototype.move = function (targetPos, renderCB) {\n  if (Util.posEquals(targetPos, this.pos))\n    return;\n\n  var b = this.board;\n\n  renderCB(this.pos, targetPos, true);\n\n  this.board.clearPos(this.pos);\n  this.board.removePiece(targetPos);\n  this.setPos(targetPos);\n  this.board.placePiece(this);\n\n  if (this.board.isGameOver()) {\n    console.log('move attempt when game over');\n  }\n\n  this.isMoveable = false;\n  setTimeout(function() {\n    this.isMoveable = true;\n  }.bind(this), Constants.Timer + 500);\n};\n\nmodule.exports = Knight;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/knight.js\n ** module id = 12\n ** module chunks = 0\n **/","var Util = require('../util');\nvar Piece = require('./piece');\nvar Slide = require('./slide');\n\nfunction Rook(attrs){\n  this.color = attrs.color;\n  this.board = attrs.board;\n  this.pos = attrs.pos;\n  this.moved = false;\n  this.isMoveable = true;\n\n  var self = this;\n  self.board.addPiece(self);\n\n  this.moves = Slide.moves.bind(this);\n}\n\nUtil.inherits(Rook, Piece);\n\nRook.prototype.getMoveDirs = function () {\n  return Piece.STRAIGHTS;\n};\n\nmodule.exports = Rook;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/rook.js\n ** module id = 13\n ** module chunks = 0\n **/","var Util = require('../util');\nvar Piece = require('./piece');\nvar Slide = require('./slide');\n\nfunction Queen(attrs){\n  this.color = attrs.color;\n  this.board = attrs.board;\n  this.pos = attrs.pos;\n  this.isMoveable = true;\n\n  var self = this;\n  self.board.addPiece(self);\n\n  this.moves = Slide.moves.bind(this);\n}\n\nUtil.inherits(Queen, Piece);\n\nQueen.prototype.getMoveDirs = function () {\n  return Piece.STRAIGHTS.concat(Piece.DIAGONALS);\n};\n\nmodule.exports = Queen;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/queen.js\n ** module id = 14\n ** module chunks = 0\n **/","var Util = require('../util');\nvar Piece = require('./piece');\nvar Step = require('./step');\nvar Constants = require('../constants');\n\nfunction King(attrs){\n  this.color = attrs.color;\n  this.board = attrs.board;\n  this.pos = attrs.pos;\n  this.moved = false;\n  this.isMoveable = true;\n\n  var self = this;\n  self.board.addPiece(self);\n\n  this.moves = Step.moves.bind(this);\n}\n\nUtil.inherits(King, Piece);\n\nKing.prototype.getMoveDirs = function () {\n  var dirs = Piece.STRAIGHTS.concat(Piece.DIAGONALS);\n\n  var isClearLeft = (this.board.isEmpty([this.pos[0], this.pos[1] - 1])\n    && this.board.isEmpty([this.pos[0], this.pos[1] - 2])\n    && this.board.isEmpty([this.pos[0], this.pos[1] - 3]));\n  var isClearRight = (this.board.isEmpty([this.pos[0], this.pos[1] + 1])\n    && this.board.isEmpty([this.pos[0], this.pos[1] + 2]));\n  var canCastleLeft = (isClearLeft\n    && !this.moved\n    && this.board.hasPiece([this.pos[0], 0])\n    && this.board.piece([this.pos[0], 0]).type() === 'Rook'\n    && !this.board.piece([this.pos[0], 0]).moved);\n  var canCastleRight = (isClearRight\n    && !this.moved\n    && this.board.hasPiece([this.pos[0], 7])\n    && this.board.piece([this.pos[0], 7]).type() === 'Rook'\n    && !this.board.piece([this.pos[0], 7]).moved);\n\n  if (canCastleLeft) {\n    dirs.push([0, -2]);\n  }\n  if (canCastleRight) {\n    dirs.push([0, 2]);\n  }\n\n  return dirs;\n};\n\nKing.prototype.move = function (targetPos, renderCB) {\n  var dx = Math.abs(targetPos[0] - this.pos[0]);\n  var dy = Math.abs(targetPos[1] - this.pos[1]);\n  var left = targetPos[1] === 2 ? true : false;\n  var b = this.board;\n  var rook;\n  if (left) {\n    rook = this.board.piece([this.pos[0], 0]);\n  } else {\n    rook = this.board.piece([this.pos[0], 7]);\n  }\n\n  if (dy > 1) {\n    setTimeout(function() {\n      var newPos = left ? [rook.pos[0], 3] : [rook.pos[0], 5];\n      var oldPos = rook.pos;\n      renderCB(rook.pos, newPos, true);\n      b.clearPos(rook.pos);\n      if (left)\n        rook.setPos([oldPos[0], 3]);\n      else\n        rook.setPos([oldPos[0], 5]);\n      b.placePiece(rook);\n\n      rook.isMoveable = false;\n      setTimeout(function() {\n        rook.isMoveable = true;\n      }, Constants.Timer + 500);\n    }, 500);\n  }\n  Piece.prototype.move.call(this, targetPos, renderCB);\n};\n\nmodule.exports = King;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/pieces/king.js\n ** module id = 15\n ** module chunks = 0\n **/","function Player(board) {\n  this.selected = undefined;\n  this.addListeners();\n  this.board = board;\n}\n\nPlayer.prototype.addListeners = function () {\n  $('#grid').click(function(event) {\n    // move logic here\n    // console.log($(event.target).attr('pos'));\n  });\n};\n\nmodule.exports = Player;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/player.js\n ** module id = 16\n ** module chunks = 0\n **/","function RandomAI(board, display) {\n  this.board = board;\n  this.display = display;\n}\n\nRandomAI.prototype.run = function () {\n  this.intervalID = setInterval(function() {\n    if (this.board.isGameOver())\n      clearInterval(this.intervalID);\n    var piece = this.randPiece();\n    var move = this.randMove(piece);\n    this.board.move(piece.pos, move, this.display.renderCB);\n  }.bind(this), 500);\n};\n\nRandomAI.prototype.kill = function () {\n  if (this.intervalID)\n    clearInterval(this.intervalID);\n};\n\nRandomAI.prototype.randPiece = function () {\n  var pieces = this.board.blackPieces.filter(function(piece) {\n    return piece.isMoveable;\n  });\n  var randPiece = pieces[Math.floor(Math.random()*pieces.length)];\n  return randPiece;\n};\n\nRandomAI.prototype.randMove = function (piece) {\n  var moves = piece.moves();\n  var randMove = moves[Math.floor(Math.random()*moves.length)];\n  return randMove;\n};\n\nmodule.exports = RandomAI;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/randomAI.js\n ** module id = 17\n ** module chunks = 0\n **/","function GreedyAI(board, display) {\n  this.board = board;\n  this.display = display;\n}\n\nGreedyAI.prototype.run = function () {\n  this.intervalID = setInterval(function() {\n    if (this.board.isGameOver())\n      clearInterval(this.intervalID);\n    var piece = this.findPiece();\n    if (piece) {\n      var take = this.takeableMove(piece);\n      var move = take ? take : this.randMove(piece);\n      this.board.move(piece.pos, move, this.display.renderCB);\n    }\n  }.bind(this), 1250);\n};\n\nGreedyAI.prototype.kill = function () {\n  if (this.intervalID)\n    clearInterval(this.intervalID);\n};\n\nGreedyAI.prototype.randPiece = function () {\n  var pieces = this.moveablePieces();\n  var randPiece = pieces[Math.floor(Math.random()*pieces.length)];\n  return randPiece;\n};\n\nGreedyAI.prototype.randMove = function (piece) {\n  var moves = piece.moves();\n  var randMove = moves[Math.floor(Math.random()*moves.length)];\n  return randMove;\n};\n\nGreedyAI.prototype.takeableKing = function (piece) {\n  var move;\n  for (var i = 0; i < piece.moves().length; i++) {\n    move = piece.moves()[i];\n    if (this.board.hasPiece(move)\n        && this.board.piece(move).color === 'white'\n        && this.board.piece(move).type === 'King') {\n      return move;\n    }\n  }\n};\n\nGreedyAI.prototype.takeableMove = function (piece) {\n  if (typeof piece === 'undefined')\n    return;\n\n  var move;\n  for (var i = 0; i < piece.moves().length; i++) {\n    move = piece.moves()[i];\n    if (this.board.hasPiece(move) && this.board.piece(move).color === 'white') {\n      return move;\n    }\n  }\n};\n\nGreedyAI.prototype.moveablePieces = function () {\n  var pieces = this.board.blackPieces.filter(function(piece) {\n    return (piece.isMoveable && piece.moves().length > 0);\n  });\n\n  return pieces;\n};\n\nGreedyAI.prototype.findPiece = function () {\n  var pieces = this.moveablePieces();\n  for (var i = 0; i < pieces.length; i++) {\n    var move = this.takeableMove(pieces[i]);\n    if (move) {\n      return pieces[i];\n    }\n  }\n\n  return this.randPiece();\n};\n\nmodule.exports = GreedyAI;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/greedyAI.js\n ** module id = 18\n ** module chunks = 0\n **/"],"sourceRoot":""}